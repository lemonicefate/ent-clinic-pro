/**
 * 動態表單生成器樣式
 */

/* ============================================================================
   基礎表單樣式
   ============================================================================ */

.calculator-form {
  @apply w-full max-w-4xl mx-auto;
}

.calculator-form-title {
  @apply text-2xl font-bold text-medical-neutral-900 mb-4;
}

.calculator-form-description {
  @apply text-medical-neutral-600 mb-6 leading-relaxed;
}

.calculator-form-content {
  @apply space-y-6;
}

/* ============================================================================
   佈局樣式
   ============================================================================ */

.calculator-form-single-column .calculator-form-fields {
  @apply space-y-6;
}

.calculator-form-two-column .calculator-form-fields {
  @apply grid grid-cols-1 md:grid-cols-2 gap-6;
}

.calculator-form-grid .calculator-form-fields {
  @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6;
}

.calculator-form-accordion .calculator-form-sections {
  @apply space-y-4;
}

/* ============================================================================
   區段樣式
   ============================================================================ */

.form-section {
  @apply bg-white rounded-lg border border-medical-neutral-200 overflow-hidden;
}

.form-section-toggle {
  @apply w-full px-6 py-4 text-left bg-medical-neutral-50 hover:bg-medical-neutral-100 transition-colors duration-200 flex items-center justify-between;
}

.form-section-title {
  @apply text-lg font-semibold text-medical-neutral-900;
}

.form-section-icon {
  @apply text-medical-neutral-500 transition-transform duration-200;
}

.form-section-icon.expanded {
  @apply transform rotate-180;
}

.form-section-description {
  @apply px-6 py-2 text-sm text-medical-neutral-600 bg-medical-neutral-50;
}

.form-section-content {
  @apply transition-all duration-300 ease-in-out;
}

.form-section-content.collapsed {
  @apply max-h-0 overflow-hidden;
}

.form-section-fields {
  @apply p-6 space-y-6;
}

/* ============================================================================
   欄位基礎樣式
   ============================================================================ */

.form-field {
  @apply space-y-2;
}

.form-field-label {
  @apply block text-sm font-medium text-medical-neutral-700;
}

.form-field-required {
  @apply text-medical-error-500 ml-1;
}

.form-field-description {
  @apply text-sm text-medical-neutral-500 leading-relaxed;
}

.form-field-input-wrapper {
  @apply relative;
}

.form-field-input {
  @apply block w-full px-3 py-2 border border-medical-neutral-300 rounded-md shadow-sm placeholder-medical-neutral-400 focus:outline-none focus:ring-2 focus:ring-medical-primary-500 focus:border-medical-primary-500 transition-colors duration-200;
}

.form-field-input:disabled {
  @apply bg-medical-neutral-100 text-medical-neutral-500 cursor-not-allowed;
}

.form-field-input-error {
  @apply border-medical-error-300 text-medical-error-900 placeholder-medical-error-300 focus:ring-medical-error-500 focus:border-medical-error-500;
}

.form-field-unit {
  @apply absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-sm text-medical-neutral-500;
}

.form-field-error {
  @apply text-sm text-medical-error-600 flex items-center;
}

.form-field-error::before {
  content: "⚠";
  @apply mr-1 text-medical-error-500;
}

/* ============================================================================
   數字欄位樣式
   ============================================================================ */

.form-field-number input[type="number"] {
  @apply text-right;
}

.form-field-number .form-field-unit {
  @apply pr-3;
}

/* ============================================================================
   選擇欄位樣式
   ============================================================================ */

.form-field-select-input {
  @apply appearance-none bg-white cursor-pointer;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.5rem center;
  background-repeat: no-repeat;
  background-size: 1.5em 1.5em;
  padding-right: 2.5rem;
}

.form-field-select-input:disabled {
  @apply cursor-not-allowed;
}

/* ============================================================================
   複選框樣式
   ============================================================================ */

.form-field-checkbox-wrapper {
  @apply flex items-start;
}

.form-field-checkbox-input {
  @apply h-4 w-4 text-medical-primary-600 focus:ring-medical-primary-500 border-medical-neutral-300 rounded mt-0.5;
}

.form-field-checkbox-label {
  @apply ml-3 text-sm font-medium text-medical-neutral-700 cursor-pointer;
}

.form-field-checkbox .form-field-description {
  @apply ml-7 mt-1;
}

/* ============================================================================
   單選框樣式
   ============================================================================ */

.form-field-radio-fieldset {
  @apply border-0 p-0 m-0;
}

.form-field-radio-options {
  @apply space-y-3 mt-3;
}

.form-field-radio-option {
  @apply flex items-start;
}

.form-field-radio-input {
  @apply h-4 w-4 text-medical-primary-600 focus:ring-medical-primary-500 border-medical-neutral-300 mt-0.5;
}

.form-field-radio-label {
  @apply ml-3 text-sm font-medium text-medical-neutral-700 cursor-pointer;
}

.form-field-radio-description {
  @apply ml-7 mt-1 text-xs text-medical-neutral-500;
}

/* ============================================================================
   範圍滑桿樣式
   ============================================================================ */

.form-field-range-wrapper {
  @apply space-y-2;
}

.form-field-range-input {
  @apply w-full h-2 bg-medical-neutral-200 rounded-lg appearance-none cursor-pointer;
}

.form-field-range-input::-webkit-slider-thumb {
  @apply appearance-none w-5 h-5 bg-medical-primary-600 rounded-full cursor-pointer;
}

.form-field-range-input::-moz-range-thumb {
  @apply w-5 h-5 bg-medical-primary-600 rounded-full cursor-pointer border-0;
}

.form-field-range-input:focus {
  @apply outline-none ring-2 ring-medical-primary-500 ring-opacity-50;
}

.form-field-range-value {
  @apply text-center text-lg font-semibold text-medical-primary-600;
}

.form-field-range-labels {
  @apply flex justify-between text-xs text-medical-neutral-500;
}

/* ============================================================================
   響應式設計
   ============================================================================ */

@media (max-width: 640px) {
  .calculator-form-two-column .calculator-form-fields,
  .calculator-form-grid .calculator-form-fields {
    @apply grid-cols-1;
  }
  
  .form-section-toggle {
    @apply px-4 py-3;
  }
  
  .form-section-fields {
    @apply p-4;
  }
  
  .form-field-radio-options {
    @apply space-y-2;
  }
}

/* ============================================================================
   深色模式支援
   ============================================================================ */

@media (prefers-color-scheme: dark) {
  .calculator-form-title {
    @apply text-medical-neutral-100;
  }
  
  .calculator-form-description {
    @apply text-medical-neutral-300;
  }
  
  .form-section {
    @apply bg-medical-neutral-800 border-medical-neutral-700;
  }
  
  .form-section-toggle {
    @apply bg-medical-neutral-700 hover:bg-medical-neutral-600;
  }
  
  .form-section-title {
    @apply text-medical-neutral-100;
  }
  
  .form-section-description {
    @apply bg-medical-neutral-700 text-medical-neutral-300;
  }
  
  .form-field-label {
    @apply text-medical-neutral-200;
  }
  
  .form-field-description {
    @apply text-medical-neutral-400;
  }
  
  .form-field-input {
    @apply bg-medical-neutral-700 border-medical-neutral-600 text-medical-neutral-100 placeholder-medical-neutral-400;
  }
  
  .form-field-input:disabled {
    @apply bg-medical-neutral-800 text-medical-neutral-500;
  }
  
  .form-field-checkbox-label,
  .form-field-radio-label {
    @apply text-medical-neutral-200;
  }
  
  .form-field-radio-description {
    @apply text-medical-neutral-400;
  }
  
  .form-field-range-input {
    @apply bg-medical-neutral-600;
  }
  
  .form-field-range-labels {
    @apply text-medical-neutral-400;
  }
}

/* ============================================================================
   動畫效果
   ============================================================================ */

.form-field {
  animation: formFieldFadeIn 0.3s ease-out;
}

@keyframes formFieldFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.form-section-content {
  transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
}

.form-field-input:focus {
  @apply transform scale-[1.02];
  transition: all 0.2s ease-in-out;
}

/* ============================================================================
   無障礙支援
   ============================================================================ */

.form-field-input:focus,
.form-field-checkbox-input:focus,
.form-field-radio-input:focus,
.form-field-range-input:focus {
  @apply ring-2 ring-offset-2 ring-medical-primary-500;
}

.form-section-toggle:focus {
  @apply ring-2 ring-offset-2 ring-medical-primary-500 outline-none;
}

/* 高對比模式支援 */
@media (prefers-contrast: high) {
  .form-field-input {
    @apply border-2 border-black;
  }
  
  .form-field-input-error {
    @apply border-2 border-red-600;
  }
  
  .form-field-checkbox-input,
  .form-field-radio-input {
    @apply border-2 border-black;
  }
}

/* 減少動畫偏好 */
@media (prefers-reduced-motion: reduce) {
  .form-section-content,
  .form-section-icon,
  .form-field-input {
    @apply transition-none;
  }
  
  .form-field {
    animation: none;
  }
}

/* ============================================================================
   列印樣式
   ============================================================================ */

@media print {
  .calculator-form {
    @apply text-black bg-white;
  }
  
  .form-section-toggle {
    @apply bg-white;
  }
  
  .form-section-content.collapsed {
    @apply max-h-none overflow-visible;
  }
  
  .form-field-input {
    @apply border border-black bg-white;
  }
  
  .form-field-error {
    @apply text-black;
  }
}