---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PluginCalculator from '../../components/islands/PluginCalculator.tsx';
import type { SupportedLocale } from '../../types/calculator.js';

const locale: SupportedLocale = 'zh-TW';

const pluginMetadata = {
  id: 'pediatric-antibiotic-calculator',
  namespace: 'pediatrics',
  version: '1.0.0',
  name: {
    'zh-TW': '兒童抗生素劑量計算器',
    'en': 'Pediatric Antibiotic Dose Calculator',
    'ja': '小児抗生物質用量計算機'
  },
  description: {
    'zh-TW': '專業的兒童抗生素劑量計算工具，支援多種抗生素和抗病毒藥物的劑量計算，幫助醫療人員快速準確計算用藥劑量',
    'en': 'Professional pediatric antibiotic dose calculation tool supporting multiple antibiotics and antiviral medications, helping healthcare professionals calculate accurate dosages quickly',
    'ja': '複数の抗生物質と抗ウイルス薬の用量計算をサポートする専門的な小児抗生物質用量計算ツール、医療従事者が迅速かつ正確に投薬量を計算するのを支援'
  },
};

const breadcrumbs = [
  { label: '首頁', href: '/' },
  { label: '醫療工具', href: '/tools' },
  { label: pluginMetadata.name[locale] },
];
---

<BaseLayout
  title={`${pluginMetadata.name[locale]} | Astro Clinical Platform`}
  description={pluginMetadata.description[locale]}
  locale={locale}
  medicalContent={true}
  pageType="calculator"
  breadcrumbs={breadcrumbs}
>
  <main class="container mx-auto px-4 py-8">
    <!-- 計算機標題和描述 -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-4">
        {pluginMetadata.name[locale]}
      </h1>
      <p class="text-lg text-gray-600">
        {pluginMetadata.description[locale]}
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- 計算機主體 -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-lg border border-gray-200 p-6">
          <PluginCalculator
            client:load
            transition:persist="pediatric-antibiotic-calculator"
            pluginId="pediatrics.pediatric-antibiotic-calculator"
            locale={locale}
            theme="light"
            accessibility={{
              highContrast: false,
              largeText: false,
              screenReader: false,
            }}
            className="pediatric-antibiotic-calculator"
          />
        </div>
      </div>

      <!-- 側邊欄資訊 -->
      <div class="space-y-6">
        <!-- 使用說明 -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">使用說明</h2>
          <div class="text-sm text-gray-700 space-y-3">
            <div>
              <h3 class="font-semibold text-gray-800 mb-1">1. 輸入基本資料</h3>
              <p>請輸入兒童的體重（必填）和年齡（部分藥物需要）</p>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800 mb-1">2. 選擇劑型</h3>
              <p>選擇藥粉或藥錠/膠囊劑型，影響劑量計算方式</p>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800 mb-1">3. 設定療程</h3>
              <p>選擇治療天數和每日用藥頻次</p>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800 mb-1">4. 查看結果</h3>
              <p>系統會計算多種抗生素的劑量，請根據臨床需要選擇</p>
            </div>
          </div>
        </div>

        <!-- 支援藥物 -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">支援藥物</h2>
          <div class="text-sm text-gray-700 space-y-2">
            <div>
              <h3 class="font-semibold text-blue-700 mb-2">抗細菌藥物</h3>
              <ul class="space-y-1 text-xs">
                <li>• Cefixime (100mg)</li>
                <li>• Baktar (400/80mg)</li>
                <li>• Levofloxacin (500mg)</li>
                <li>• Cephalexin (500mg)</li>
                <li>• Azithromycin (250mg)</li>
                <li>• Minocycline (50mg)</li>
                <li>• Doxycycline (50mg)</li>
              </ul>
            </div>
            <div>
              <h3 class="font-semibold text-green-700 mb-2">抗病毒藥物</h3>
              <ul class="space-y-1 text-xs">
                <li>• Acyclovir (800mg)</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- 重要提醒 -->
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
          <h2 class="text-lg font-semibold text-yellow-800 mb-3">重要提醒</h2>
          <div class="text-sm text-yellow-700 space-y-2">
            <p>• 本計算結果僅供臨床參考，不能取代專業醫師的判斷</p>
            <p>• 請根據患者的感染類型、病原體敏感性和過敏史選擇適當的抗生素</p>
            <p>• 注意各藥物的禁忌症和年齡限制</p>
            <p>• 四環黴素類藥物（Minocycline、Doxycycline）不建議8歲以下兒童使用</p>
          </div>
        </div>

        <!-- 相關資源 -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">相關資源</h2>
          <div class="text-sm text-gray-700 space-y-2">
            <a 
              href="/tools/amoxicillin-clavulanate-dose" 
              class="block text-teal-600 hover:text-teal-800 font-medium"
            >
              → Amoxicillin/Clavulanate 劑量計算器
            </a>
            <a 
              href="/education" 
              class="block text-teal-600 hover:text-teal-800 font-medium"
            >
              → 兒科抗生素使用指引
            </a>
            <a 
              href="/specialties/pediatrics" 
              class="block text-teal-600 hover:text-teal-800 font-medium"
            >
              → 小兒科醫療資源
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>

<style>
  /* 確保計算器樣式正確載入 */
  .pediatric-antibiotic-calculator {
    min-height: 400px;
  }
  
  /* 響應式調整 */
  @media (max-width: 1024px) {
    .pediatric-antibiotic-calculator {
      min-height: 300px;
    }
  }
</style>